language: php
sudo: false
cache:
  apt: true
  directories:
  - "$HOME/.composer/cache"
  - "$HOME/.cache/bin"
  - "$HOME/.n98-magerun/modules"
  - "$HOME/.cache/magento"
php:
- 7.0
- 7.1
- 7.2
matrix:
  fast_finish: true
  allow_failures:
  - php: 7.2
env:
  global:
  - APPNAME=MageTrashApp
  - secure: x+9KdF44Ljwx9fPkoByTYENXS78DNirIHZyrAT6APJOPxjq3+lr2dxJXqNTziJ19CkuhWqfY5OVBA//RsKjz+OGHbQvpn5VGfHzcA9YTEabfIwQPhePG7JPPxu2OcQnnOUazGrnodcS7sWBC5HVj/Sommabo7KVTqMEY++DNHFPeU8IieYy1Gz6Yrsn/Gpk+KZiEYz2P8hzFdEGTLT/OZBqbfS117cHclUkCQ2rpvv5s9E832WMStRgO0ze2xr63cwmjTUCKqib/YpHFbfUIvLLmqBYvnxwVeKQTdDkOORMzDo7Nd7zyCvF/v5k661LAoQT63JN2ugAtqvkfcz5hL/g6EWx7DckqdI4Z32IOHD1F2xXwkIc5F0hdQdAW0CSawemNW8qRSKLAL7SGdloW7XmA/lkV4YMaM82pxoBX8L1jpTY+2kubJH0AkxMMHodkcqIgik5g6ndOZADkW2wZV8LDaonPatAaIAos3U4Qrc4BRFkz9ZBZf5Nu6MZh697v6O8zV/qSoUAkWwhw3xw5hjm5KNGvDlN+5tqDMEjvz/EQRsYPTOhorO3R4XI8FPa//hhQNOynTcYsa3imhUBzPBztZicggpWMhV0NnV3CkKBn2NjJaSQhlr5saAoomKPWgsUfQyB3z2fJhAwdwrXY2NuT1JFT+aWFbrICzJa8SUE=
  - secure: K4VSybOed6z+K/ujX0X87WvGP/pJNpR0OLg3tl+1QOMCPafj8VDh+C5Wh98uO3dzvCedFwV7lSMlkoziDDgeHwQpcCJID9y3UbtXszCq2/2eFW8jNv6GVt8JyyYjm59MD93lA8UlYP1JyBHaYWf1eH6Mj32HtxafKDLhd9KzuS+YIlDNnD4OKz1KNGaoiIPpnEIwSY4/IUMMsySk34oaBVC0rpZwqaW8oaO7o9QsejF0xP1sisMTbyf8Zs45Ca8P9Iii9rAwzXElC8Mdb7wkVJDznzg2zeWMUlyhTJsY9hSEcdkDi24Dphd15wSZv96pjluNFJp08GsLTnl6AxJGIcPZ5bHqa+umgwnBLUCXheQ/UBiHDqr6iiN+ZgvYuGpC3rxOfPYNYgDVlSbYBSZlg3Jon2olxp/ooKKsW6l94BGSIQg0+pvB9GvP4/PR0zXXYHfB368HF5fQ3SWFhd8MKDzGZf/mIfB1/OKSFCeu7OVR51+Ja76yLRtYK6F5V66RUjtT2Tdvfl1pazK1c8QBB5NKQiAJ1d5rpEr/9vSGruyeoOrt9goooum/Cj5HAaE2q61gsvUDalOLmEgAp8QN8XJCassCpJ/CBwgDxGoA1f6C1GXrbEs4R6uFynsDQSY0mM/hTyZ01a8KVngYRp7EQpO7Ur5b606TG8yWE8wetNg=
  - secure: q6PZr17FHmLSkxz9d571R7L8v6B79G9DTTpuaxBVg0E/lggCiWKv8p/6D8K65i8KQIicAcbkqJo8Zr967lw4RJMpSdlynum3wRPO2h+4DVGmc9HKL519TOEDMPmGURQJQygbiNfJd6nluhvHMB+NePimNcxbVLAzpn3vtqSOpERIqQMlo3gyfypIWeQnlffHHCmdzTlXgLgW+A9tYA4p2TPq1uoo4Sd1o0Gdaw3nFk3p67OIZxtuRgx0RmXz7Df/jAA69BAQx1gSEXIz8fOfV1wCetNrqwZiMwgDU9DiNtjRAlGlp1F5du9LM/xyNIfmi1kcr1zjyWb/AXLxRvGCQBy7nY387t85MbBOkFqLrn8rgOMTOB+DObtGiDU6h2e53Ix4rOFPDTG1AOMs7yPoup8aCWBYm70TnUY1ZgW7LH7nEwgSDEOAmqYsMNco4d3dJptrbX6AUCGRsjjHF9xpqYvvov72AagXwxoQh94xSV5bOY1fAn46DD4qYFvc/2tFKOzNvgFXVd4QL9T5IED3UDMAwwun04H3MAe4Ty7XjrTmpDy4zA8QHl6T9ZzqUMk/de/EPjbKw8GlhRnoMpvjYtoQjzl+xpikFk8v7y7AosDCu8n/G3mMBGi1g9BzODXJVgGPfLVyLs9cJcMzt0Ms6PWM2mVwHihvnOHrwOtMjpk=
  matrix:
  - MAGENTO_VERSION=ce-1.9.3.10
before_install:
- curl -sSL https://raw.githubusercontent.com/ffuenf/MageTestStand/master/before_install.sh
  | bash
script:
- curl -sSL https://raw.githubusercontent.com/ffuenf/MageTestStand/master/script.sh
  | bash
deploy:
  provider: releases
  file:
  - "${APPNAME}-${TRAVIS_TAG}.zip"
  - "${APPNAME}-${TRAVIS_TAG}.tar.gz"
  skip_cleanup: true
  on:
    branch: master
    tags: true
  api_key:
    secure: AFRuzSR6YZJh4cGJXdeWSdFrIbVdccfdPIk7Hq0D8fqQlzUxNIEPYgIkUTVqadE/SnudQ8cF/zIUh476jkaUllVrX8yeddMURW2uHe74RGrSTMWXgjrz3GnySm9IFOZ59dh5nlvp4+tfevXwMsR3+5EIX+i4WMB4NxeY97Ro0AQmiNtuJDvQNYocSRU1IrmTM6tsSUnsy+r2YFFVdk8/ReL/YooubWrBIZnKzM7ULe4HfQ0UTbxzWyufUJGfWyScsZoC6zQLpJVcx4akxv6AOSGI1I2N7fRVyHISPyAFEzxbk9IOGz7P9rnFajH1C0sqqcQXXHny5eaoUI8GtX7zvsQi5Qh8zIZsWeKBysJOJnURAlOtb7eHwE23XI3gdwxSDgFPYVfXgw391bB1rfx0gAOMdh05yjGYM2IrDAH+eDL7uZJXCKncd4daPc1BPx9jbW3Gw5iVyhI7uO0oPKhRH6gAryrz2uQ0M00obm6HAC10eyxHOopQvz8uaziXaG6aUdSyVgYNFhap/azUFEWifYRTiUyZTcTx8o8zRKqSBrQuZfuM6DoPQPIo7bOdOCo37w3ps5dMDCO9VCimiNaW9ucrYHo3K0ljHAatuMl3Hmx8jULn8HcBwbdhYoJ3ZU7cRtPmZxvHpFZs9QVvJafMX6b3FhknaLYvxzrgLuo3RRQ=
notifications:
  slack:
    secure: CziNJRuFPjoIin2xpjIzeozz2feKq9OzKUaAqEwXoAyAelfg6cKzBEzu4vBZSyLUMRgCF/o3Rrbr6HKusxWZ3OE8vDz7o17AVExGFD/yh5/P2Gkv0mGksp4QKkVk/nPI7gUD6Pzy3A4F0Xg6FtA/hg4n4Iz7YPPGzV8va160B8hx40SBVWiFJbavSXDgJgKlm5Oql3TmFRvwJgTNrhYgZkT6NDvTJrMmHGGZlf890nLQQ5K6txhf8NSDuhIf1aY98TgG5JfaYF2zxx61VIEzct3Mf6L5hqLv4B+H5snKt03XjTG/ufI3U4p3caDXibuOs0TRePZyxJP9Shcr+iJq9gfA+qhbydee215Ky56IMxCIGbioVc7FkSj7QrO/xPMoUKPTtRgazU3eAvzoE5Pw+/2D5p58Qc9YShYKxUZD7fNUQ6X353HLHmI/V2uM+HApCWWUZ1u8RBQoybg+Kc2iV4g71m8idkDz9I7n++qin39hBfEHvV5p8/3TAYbli+WDs5YyIaUHCQEDcQfNapQDkdevAD3/+Rh+vGjA5Gd4TZ5rzga13JEGj5D15asdR+QHM2NCH/3TN3wLOV4wr157hPFb4G4r5WeXUFhT8Pj7KsaAinGFfVHFRAX9tFSOhziPUu7QvvcLw+y5KRUeITsYBVrOsh+JWZVKuFZ6u1Q42fs=
